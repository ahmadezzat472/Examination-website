<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exam</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/css/global.css" />
    <link rel="stylesheet" href="/css/exam.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/js/tailwind-config.js"></script>
    <script src="/js/auth.js"></script>
    <style type="text/tailwindcss">
      button[title="current"] {
        @apply bg-primary hover:bg-primary text-white shadow-lg shadow-primary/30 ring-2 ring-primary/20;
      }

      button[title="answered"] {
        @apply bg-primary-50 hover:bg-primary-200 border-primary-400 hover:border-primary-500 text-primary-700 shadow-md shadow-primary/10;
      }

      button[title="marked"] {
        @apply bg-warning/5 hover:bg-warning/20 border-warning hover:border-warning text-warning shadow-md shadow-warning/10;
      }
    </style>
  </head>
  <body class="min-h-screen bg-background">
    <header class="fixed top-0 right-0 left-0 z-50 bg-surface shadow-lg">
      <div class="max-w-8xl mx-auto w-full px-8 max-md:px-4 py-3">
        <!-- Top -->
        <div class="flex items-center justify-between">
          <a href="/" class="flex items-center gap-1.5 group">
            <div
              class="flex h-8 w-8 items-center justify-center rounded-lg border-2 border-primary bg-primary/5 group-hover:bg-primary/100 transition-colors duration-300"
            >
              <i
                class="fa-solid fa-meteor text-primary group-hover:text-white text-sm transition-colors duration-300"
              ></i>
            </div>
            <span
              class="text-lg font-bold group-hover:text-primary-600 transition-all duration-300"
              >Ali<span
                class="text-2xl text-primary-600 group-hover:text-black font-bold"
                >z</span
              >at</span
            >
          </a>
          <div class="flex items-center gap-2">
            <button
              class="submit-exam md:hidden text-sm flex items-center gap-2 px-2 py-1 rounded-lg hover:bg-secondary/10 border border-secondary/20 hover:text-secondary shadow-md shadow-gray-300 bg-secondary-hover text-white font-bold transition-all duration-300 active:scale-95"
              type="button"
              title="Submit Exam"
            >
              Finish
            </button>
            <div
              class="timer-border w-20 flex items-center justify-center gap-2 px-2 py-1 rounded-lg bg-primary/10 border border-primary/50 shadow-md shadow-primary/10"
            >
              <i class="fa-solid fa-clock text-primary text-sm"></i>
              <span
                class="text-primary-700 text-sm font-bold w-14"
                id="timer-display"
              ></span>
            </div>
          </div>
          <div class="flex items-center space-x-3 max-md:hidden">
            <div class="hidden sm:block text-right">
              <p id="user-name" class="text-sm font-medium">John Smith</p>
              <p class="text-xs text-muted-light dark:text-muted-dark">
                Student
              </p>
            </div>
            <img
              alt="User Avatar"
              class="h-9 w-9 rounded-full ring-2 ring-primary p-0.5 object-cover"
              src="https://lh3.googleusercontent.com/aida-public/AB6AXuBecymijBK4VfJCeg19x6-6OEmDc1rX_gYYWUE6k2azzMjYRPZ0qgOzHYMf2cTTTMIZfZtmSc4QQpXFuwLJsn9whGDjA3GhI88UGK_l7UM_NMztN2VLVxdD2Uk8Gzb3zEzwSZOSz1p9d0ZaU5i5_qbYyUAgeLcyOyr0KpQkuVrum2BySoYXUvOn1mNYSn_lysBlb0jLB3FcLGnyjbgxf8y3s2-6_iukhxTw0EpGq0ZCjMudqsMcnWrbUAQYmKW1pPAf6bRkMPb4yvo"
            />
          </div>
        </div>
      </div>
      <!-- Progress Bar -->
      <div
        class="h-1 bg-primary transition-all duration-300 rounded-full"
        id="progress-bar"
        style="width: 75%"
      ></div>
    </header>

    <main class="max-w-8xl mx-auto w-full px-8 max-md:px-4 pb-8">
      <div
        class="flex flex-col md:flex-row gap-4 md:gap-6 mt-20 md:mt-24 relative"
      >
        <!-- Sidebar -->
        <button
          id="sidebar-menu"
          class="md:hidden self-start ml-2 bg-primary-50 hover:bg-primary-100 border-2 border-primary/20 outline-none h-9 w-9 rounded-lg active:scale-95 transition-all duration-200"
        >
          <i class="fa-solid fa-bars-staggered text-primary-600"></i>
        </button>
        <aside
          id="sidebar"
          class="max-md:hidden max-md:max-w-72 max-md:absolute max-sm:top-12 max-sm:left-2 sm:top-0 sm:left-14 z-40 md:w-64 lg:w-72 xl:w-80 shrink-0"
        >
          <div
            class="md:sticky md:top-30 space-y-4 max-md:z-40 max-md:p-3 max-md:bg-primary-100/30 max-md:backdrop-blur-sm max-md:rounded-lg max-md:shadow-lg max-md:border max-md:border-gray-200"
          >
            <!-- Questions -->
            <div
              class="bg-surface rounded-xl shadow-card border border-border p-5"
            >
              <div class="flex gap-5 items-center mb-4 font-semibold">
                <div class="flex items-center gap-2">
                  <i
                    class="fa-solid fa-circle-question text-primary text-lg"
                  ></i>
                  <h2 class="text-sm">Question Navigation</h2>
                </div>
                <span
                  id="question-nav-numbers"
                  class="ml-auto text-xs bg-primary/10 text-primary px-2 py-0.5 rounded-full font-semibold"
                  >5</span
                >
              </div>
              <div
                id="questions-navigation"
                class="grid [grid-template-columns:repeat(auto-fill,minmax(2rem,1fr))] lg:[grid-template-columns:repeat(auto-fill,minmax(2.5rem,1fr))] gap-x-1.5 gap-y-3 justify-center font-semibold text-sm"
              ></div>
            </div>

            <!-- Marked Questions Summary -->
            <div
              class="bg-surface rounded-xl shadow-card border border-border p-5"
            >
              <div class="flex items-center gap-2 mb-2">
                <i class="fa-solid fa-bookmark text-warning text-lg"></i>
                <h2 class="text-sm font-semibold">Marked for Review</h2>
                <span
                  id="question-marked-numbers"
                  class="ml-auto text-xs bg-warning/10 text-warning px-2 py-0.5 rounded-full font-semibold"
                  >5</span
                >
              </div>
              <div id="questions-marked" class=""></div>
            </div>

            <div
              class="max-md:hidden bg-surface rounded-xl shadow-card border border-border p-5"
            >
              <div class="flex items-center justify-between gap-3">
                <button
                  class="prev-btn flex py-1 flex-1 items-center justify-center gap-2 rounded-xl bg-primary text-white px-4 text-sm font-bold shadow-lg shadow-primary/30 hover:bg-primary-hover transition-all active:scale-95"
                  type="button"
                >
                  <i class="fa-solid fa-chevron-left text-sm"></i>
                  Previous
                </button>

                <button
                  class="next-btn flex py-1 flex-1 items-center justify-center gap-2 rounded-xl bg-primary text-white px-4 text-sm font-bold shadow-lg shadow-primary/30 hover:bg-primary-hover transition-all active:scale-95"
                  type="button"
                >
                  Next
                  <i class="fa-solid fa-chevron-right text-sm"></i>
                </button>
              </div>
            </div>

            <button
              class="submit-exam dddd w-full text-center max-md:hidden text-sm gap-2 px-2 py-1 rounded-lg hover:bg-secondary/10 border border-secondary/20 hover:text-secondary shadow-md shadow-gray-300 bg-secondary-hover text-white font-bold transition-all duration-300 active:scale-95"
              type="button"
              title="Submit Exam"
            >
              Finish
            </button>
          </div>
        </aside>

        <!-- questions content -->
        <section class="flex-1 min-w-0">
          <div
            class="bg-surface rounded-2xl shadow-card border border-border p-6 md:p-8 relative overflow-hidden"
          >
            <div class="relative z-10">
              <!-- Question Header -->
              <div class="mb-6" id="question-box">
                <div class="flex items-center gap-3 mb-4">
                  <span
                    id="question-number"
                    class="min-w-5 min-h-5 w-6 h-6 lg:w-8 lg:h-8 rounded-md md:rounded-lg bg-primary/20 text-primary font-bold text-sm flex items-center justify-center"
                    >21</span
                  >
                  <h2
                    id="question-text"
                    class="text-[15px] sm:text-lg lg:text-xl font-semibold text-text-main"
                  >
                    Guess the output of the following program:
                  </h2>
                </div>

                <!-- Code Block -->
                <div
                  id="question-code"
                  class="bg-slate-900 rounded-lg p-4 text-sm text-gray-200 border-l-4 border-primary overflow-x-auto shadow-card"
                ></div>
              </div>

              <!-- Answer Options -->
              <div id="answers" class="space-y-3 mb-6"></div>

              <!-- Mark for Review Checkbox -->
              <label
                class="flex items-center gap-3 cursor-pointer group w-fit ml-1"
              >
                <div class="relative flex items-center">
                  <input
                    class="peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-500 bg-surface transition-all checked:border-warning checked:bg-warning hover:border-warning"
                    type="checkbox"
                    id="mark-input"
                  />
                  <i
                    class="fa-solid fa-check text-xs absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-white"
                  ></i>
                </div>
                <span
                  class="text-xs md:text-sm font-bold text-muted group-hover:text-text-main transition-colors flex items-center gap-2"
                >
                  Mark for review
                </span>
              </label>
            </div>
          </div>
          <div class="md:hidden rounded-xl p-5">
            <div class="flex items-center justify-between gap-3">
              <button
                class="prev-btn flex py-1 flex-1 items-center justify-center gap-2 rounded-xl bg-primary text-white px-4 text-sm font-bold shadow-lg shadow-primary/30 hover:bg-primary-hover transition-all active:scale-95"
                type="button"
              >
                <i class="fa-solid fa-chevron-left text-sm"></i>
                Previous
              </button>

              <button
                class="next-btn flex py-1 flex-1 items-center justify-center gap-2 rounded-xl bg-primary text-white px-4 text-sm font-bold shadow-lg shadow-primary/30 hover:bg-primary-hover transition-all active:scale-95"
                type="button"
              >
                Next
                <i class="fa-solid fa-chevron-right text-sm"></i>
              </button>
            </div>
          </div>
        </section>
      </div>
    </main>

    <div
      class="timeout-overlay hidden fixed inset-0 z-50 items-center justify-center bg-black/40 backdrop-blur-sm"
    >
      <div
        class="font-bold bg-white rounded-xl p-8 shadow-lg text-center max-w-sm w-full"
      >
        <h2 class="text-xl text-text-main mb-2">Time is out ‚è∞</h2>
        <p class="text-muted">Your exam has been submitted automatically.</p>
        <div>
          <span>will navigation to statistics</span>
          <i
            class="fa-solid fa-hourglass-end text-secondary font-bold text-xl mt-2"
          ></i>
        </div>
      </div>
    </div>

    <div
      class="finish-overlay fixed inset-0 z-50 hidden items-center justify-center bg-black/40 backdrop-blur-sm"
    >
      <div
        class="bg-white rounded-xl p-8 shadow-lg max-w-sm w-full text-center"
      >
        <i
          id="circle-question-icon"
          class="fa-solid fa-circle-question text-secondary text-4xl mb-4 animate-bounce"
        ></i>
        <h2 class="text-xl font-bold text-text-main mb-2">Finish Exam?</h2>
        <div class="text-muted text-sm font-semibold">
          Are you sure you want to finish the exam?
          <p
            id="left-answer"
            class="text-secondary font-bold text-muted mb-6 text-sm"
          ></p>
        </div>

        <div class="flex gap-3 justify-center">
          <button
            id="cancel-finish"
            class="px-4 py-2 rounded-lg border border-border text-text-main hover:bg-gray-200 transition"
          >
            Cancel
          </button>

          <button
            id="confirm-finish"
            class="px-4 py-2 rounded-lg bg-secondary text-white font-semibold hover:bg-secondary-hover transition"
          >
            Finish Exam
          </button>
        </div>
      </div>
    </div>

    <div
      class="error-popup fixed inset-0 z-50 hidden items-center justify-center bg-black/70 backdrop-blur-lg"
    >
      <div
        class="error-popup-container bg-red-50 border border-secondary rounded-xl p-8 shadow-lg max-w-sm w-full text-center"
      >
        <i
          class="fa-solid fa-triangle-exclamation text-secondary text-4xl mb-4 animate-bounce"
        ></i>
        <h2 class="text-xl font-bold text-red-600 mb-2">Not Allowed</h2>
        <p class="text-muted text-sm font-semibold mb-1"></p>
        <span class="text-gray-600 text-xs font-semibold"
          >Redirecting To Home<span class="ml-1 text-[18px] animate-pulse"
            >...</span
          ></span
        >
      </div>
    </div>

    <!-- <script src="/js/exam-guard.js"></script> -->
    <script type="module" src="/js/exam.js"></script>
  </body>
</html>
